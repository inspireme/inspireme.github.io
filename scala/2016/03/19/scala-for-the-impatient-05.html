<!DOCTYPE html>
<html id="J-html" class="">
<head>
    <meta charset="UTF-8" />
    <title>
        
            快学scala笔记——映射和元组
        
    </title>
    <meta name="generator" content="Jekyll" />
    <meta name="author" content="whisper" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" media="all" href="https://inspireme.github.io/static/style.css" />
	<link rel="stylesheet" type="text/css" media="all" href="https://inspireme.github.io/static/syntax.css" />
    <!--[if lt IE 9]>
    <script src="https://inspireme.github.io/static/js/html5.js" type="text/javascript"></script>
    <![endif]-->
    <script src="https://inspireme.github.io/static/js/jquery.js" type="text/javascript"></script>
</head>
<body itemscope itemtype="http://schema.org/WebPage" class="home blog lotus index">
    <nav class="lotus-nav">
        <ul>
            
            
            
            
            
            <li class="home ">
                <a href="/index.html" rel="bookmark" title="Home">
                    <i class="icon-home"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="">
                <a href="/categories.html" rel="bookmark" title="Categories">
                    <i class="icon-list-alt"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="">
                <a href="/archives.html" rel="bookmark" title="Archives">
                    <i class="icon-reorder"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="">
                <a href="/about.html" rel="bookmark" title="About Me">
                    <i class="icon-user"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="">
                <a href="mailto:cndone@gmail.com" rel="bookmark" title="Contact Me">
                    <i class="icon-envelope-alt"></i>
                </a>
                
            </li>
            
            
            
            
            
            <li class="">
                <a href="https://github.com/inspireme" rel="bookmark" title="Github">
                    <i class="icon-github"></i>
                </a>
                
            </li>
            
        </ul>
    </nav>

    <p class="lotus-breadcrub">
    <a href="https://inspireme.github.io/index.html" rel="nofollow" rel="nofollow" title="ホームページ">Home</a>
    <span> &gt; </span>
    <a href="https://inspireme.github.io/archives.html" rel="nofollow" >Archives</a>
    <span> &gt; </span>
    快学scala笔记——映射和元组
</p>
<h1 class="lotus-pagetit">快学scala笔记——映射和元组</h1>

<p class="lotus-meta">Publish: <time class="date" pubdate="March 19, 2016">March 19, 2016</time></p>

<article  itemscope itemtype="http://schema.org/Article" class="lotus-post lotus-post-columns-1">
<ul>
  <li>
    <p>映射是键/值对偶的集合。</p>
  </li>
  <li>
    <p>元组是N个对象的聚集，并不一定要相同的类型。</p>
  </li>
  <li>
    <p>构建一个不可变的映射。</p>
  </li>
</ul>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code>
<span class="k">val</span> <span class="n">scores</span> <span class="k">=</span> <span class="nc">Map</span><span class="o">(</span><span class="s">"scala"</span><span class="o">-&gt;</span><span class="mi">10</span><span class="o">,</span><span class="s">"java"</span><span class="o">-&gt;</span><span class="mi">20</span><span class="o">)</span> <span class="c1">//不可变map,值不能改变
</span>
</code></pre>
</div>

<ul>
  <li>构建一个可变的映射。</li>
</ul>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code>
<span class="k">val</span> <span class="n">imScores</span> <span class="k">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">mutable</span><span class="o">.</span><span class="nc">Map</span><span class="o">(</span><span class="s">"python"</span><span class="o">-&gt;</span><span class="mi">10</span><span class="o">,</span><span class="s">"php"</span><span class="o">-&gt;</span><span class="mi">20</span><span class="o">)</span> <span class="c1">//可变map
</span>
</code></pre>
</div>

<ul>
  <li>如果想构建一个空的映射，需要选定一个映射的实现并给出类型参数。</li>
</ul>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code>
<span class="k">val</span> <span class="n">emptyMap</span> <span class="k">=</span> <span class="k">new</span> <span class="n">collection</span><span class="o">.</span><span class="n">mutable</span><span class="o">.</span><span class="nc">HashMap</span><span class="o">[</span><span class="kt">String</span>,<span class="kt">Int</span><span class="o">]</span> <span class="c1">//空map
</span>
</code></pre>
</div>

<ul>
  <li>
    <p>使用 -&gt; 操作符创建对偶。</p>
  </li>
  <li>
    <p>也可以使用如下的方式来定义。</p>
  </li>
</ul>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code>
<span class="k">val</span> <span class="n">s</span> <span class="k">=</span> <span class="nc">Map</span><span class="o">((</span><span class="s">"scala"</span><span class="o">,</span><span class="mi">10</span><span class="o">),(</span><span class="s">"java"</span><span class="o">,</span><span class="mi">20</span><span class="o">))</span>

</code></pre>
</div>

<ul>
  <li>
    <p>显然 -&gt; 操作符比圆括号更易读。</p>
  </li>
  <li>
    <p>获取映射中的值。</p>
  </li>
</ul>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code>
<span class="k">val</span> <span class="n">scala</span> <span class="k">=</span> <span class="n">scores</span><span class="o">(</span><span class="s">"scala"</span><span class="o">)</span>

<span class="c1">//如果映射不包含请求中使用的键，则会抛出异常
</span>
</code></pre>
</div>

<ul>
  <li>检查映射中是否有某个指定的键。</li>
</ul>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code>
<span class="k">val</span> <span class="n">scala</span> <span class="k">=</span> <span class="k">if</span> <span class="o">(</span><span class="n">scores</span><span class="o">.</span><span class="n">contains</span><span class="o">(</span><span class="s">"scala"</span><span class="o">)</span> <span class="n">scores</span><span class="o">(</span><span class="s">"scala"</span><span class="o">)</span> <span class="k">else</span> <span class="mi">0</span>

</code></pre>
</div>

<ul>
  <li>上面的组合十分普遍，所以有个快捷方法。</li>
</ul>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code>
<span class="k">val</span> <span class="n">scala</span> <span class="k">=</span> <span class="n">scores</span><span class="o">.</span><span class="n">getOrElse</span><span class="o">(</span><span class="s">"scala"</span><span class="o">,</span><span class="mi">0</span><span class="o">)</span>

</code></pre>
</div>

<ul>
  <li>
    <p>映射.get(键)调用返回的是Option对象，要么是Some，要么是None。</p>
  </li>
  <li>
    <p>更新映射中的值。</p>
  </li>
</ul>

<p>在可变映射中，更新某个映射的值或者添加一个新的映射关系，做法是在＝号左侧使用()。</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code>
<span class="n">imScores</span><span class="o">(</span><span class="s">"scala"</span><span class="o">)</span> <span class="k">=</span> <span class="mi">100</span>  <span class="c1">//更新scala键对应的值
</span>
<span class="n">imScores</span><span class="o">(</span><span class="s">"php"</span><span class="o">)</span> <span class="k">=</span> <span class="mi">50</span>     <span class="c1">//增加新的映射关系
</span>
<span class="n">imScores</span> <span class="o">+=</span> <span class="o">(</span><span class="s">"python"</span> <span class="o">-&gt;</span> <span class="mi">200</span><span class="o">,</span><span class="s">"swift"</span> <span class="o">-&gt;</span> <span class="mi">300</span><span class="o">)</span> <span class="c1">//使用 += 操作来添加多个关系
</span>
<span class="n">imScores</span> <span class="o">-=</span> <span class="s">"python"</span> <span class="c1">//使用 -= 移除某个键对应的值
</span>
</code></pre>
</div>

<p>不能更新一个不可变的映射，但可以做一些同样的操作。</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code>
<span class="k">val</span> <span class="n">scores2</span> <span class="k">=</span> <span class="n">scores</span> <span class="o">+</span> <span class="o">(</span><span class="s">"scala"</span><span class="o">-&gt;</span><span class="mi">100</span><span class="o">,</span><span class="s">"php"</span><span class="o">-&gt;</span><span class="mi">300</span><span class="o">)</span>

<span class="c1">//原不可变映射scores做的scala被更新，php被添加进来
</span>
<span class="k">var</span> <span class="n">scores</span> <span class="k">=</span>  <span class="nc">Map</span><span class="o">(</span><span class="s">"scala"</span><span class="o">-&gt;</span><span class="mi">10</span><span class="o">,</span><span class="s">"java"</span><span class="o">-&gt;</span><span class="mi">20</span><span class="o">)</span>

<span class="n">scores</span> <span class="k">=</span> <span class="n">scores</span> <span class="o">+</span> <span class="o">(</span><span class="s">"scala"</span> <span class="o">-&gt;</span> <span class="mi">100</span><span class="o">,</span><span class="s">"php"</span> <span class="o">-&gt;</span> <span class="mi">300</span><span class="o">)</span>

<span class="c1">//除了把结果作为新值保存外，也可以使用var变量
</span>
<span class="n">scores</span> <span class="k">=</span> <span class="n">scores</span> <span class="o">-</span> <span class="s">"php"</span>

<span class="c1">//使用 - 操作符来获取一个新的去掉改键的映射
</span>
</code></pre>
</div>

<ul>
  <li>迭代映射。</li>
</ul>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code>
<span class="k">for</span> <span class="o">((</span><span class="n">k</span><span class="o">,</span><span class="n">v</span><span class="o">)</span> <span class="k">&lt;-</span> <span class="n">映射</span><span class="o">)</span> <span class="c1">//处理k和v
</span>
</code></pre>
</div>

<p>出于某种原因，只需要访问键和值，可以像java一样，使用keySet和values方法</p>

<ul>
  <li>反转一个映射，交换键和值的位置。</li>
</ul>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code>
<span class="k">for</span> <span class="o">((</span><span class="n">k</span><span class="o">,</span><span class="n">v</span><span class="o">)</span> <span class="k">&lt;-</span> <span class="n">映射</span><span class="o">)</span> <span class="k">yield</span> <span class="o">(</span><span class="n">v</span><span class="o">,</span><span class="n">k</span><span class="o">)</span>

</code></pre>
</div>

<ul>
  <li>已排序映射</li>
</ul>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code>
<span class="k">val</span> <span class="n">scores</span> <span class="k">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">immutable</span><span class="o">.</span><span class="nc">SortedMap</span><span class="o">(</span><span class="s">"scala"</span><span class="o">-&gt;</span><span class="mi">10</span><span class="o">,</span><span class="s">"java"</span><span class="o">-&gt;</span><span class="mi">20</span><span class="o">)</span>

</code></pre>
</div>

<ul>
  <li>按插入顺序访问所有的键，使用LinkedHashMap。</li>
</ul>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code>
<span class="k">val</span> <span class="n">months</span> <span class="k">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">immutable</span><span class="o">.</span><span class="nc">LinkedHashMap</span><span class="o">(</span><span class="s">"1"</span><span class="o">-&gt;</span><span class="mi">1</span><span class="o">,</span><span class="s">"2"</span><span class="o">-&gt;</span><span class="mi">2</span><span class="o">,</span><span class="s">"3"</span><span class="o">-&gt;</span><span class="mi">3</span><span class="o">)</span>

</code></pre>
</div>

<ul>
  <li>与java的互相操作</li>
</ul>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code>
<span class="k">import</span> <span class="nn">scala.collection.JavaConversions.mapAsScalaMap</span>

<span class="c1">//通过java方法调用得到一个java的映射，转换成scala的映射，以便使用更方便的映射api
</span>
<span class="k">val</span> <span class="n">scores</span><span class="k">:</span> <span class="kt">mutable.Map</span><span class="o">[</span><span class="kt">String</span>,<span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="k">new</span> <span class="n">java</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="nc">TreeMap</span><span class="o">[</span><span class="kt">String</span>,<span class="kt">Int</span><span class="o">]</span>



<span class="c1">//得到从java.util.Properties到Map[String,String]的转换
</span>
<span class="k">import</span> <span class="nn">scala.collection.JavaConversion.propertiesAsScalaMap</span>

<span class="k">val</span> <span class="n">props</span><span class="k">:</span> <span class="kt">scala.collection.Map</span><span class="o">[</span><span class="kt">String</span>,<span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="nc">System</span><span class="o">.</span><span class="n">getProperties</span><span class="o">()</span>



<span class="c1">//scala映射转换为java映射
</span>
<span class="k">import</span> <span class="nn">scala.collection.JavaConversions.mapAsJavaMap</span>

<span class="k">import</span> <span class="nn">java.awt.font.TextAttribute._</span>

<span class="k">val</span> <span class="n">attrs</span> <span class="k">=</span>  <span class="nc">Map</span><span class="o">(</span><span class="nc">FAMILY</span><span class="o">-&gt;</span><span class="s">"Serif"</span><span class="o">,</span><span class="nc">SIZE</span><span class="o">-&gt;</span><span class="mi">12</span><span class="o">)</span> <span class="c1">//scala映射
</span>
<span class="k">val</span> <span class="n">font</span> <span class="k">=</span> <span class="k">new</span> <span class="n">java</span><span class="o">.</span><span class="n">awt</span><span class="o">.</span><span class="nc">Font</span><span class="o">(</span><span class="n">attrs</span><span class="o">)</span> <span class="c1">//Font构造器预期接受一个java映射
</span>
</code></pre>
</div>

<ul>
  <li>元组</li>
</ul>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code>
<span class="k">val</span> <span class="n">t</span> <span class="k">=</span> <span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mf">3.14</span><span class="o">,</span><span class="s">"scala"</span><span class="o">)</span>

<span class="c1">//该元组的类型为Tuple3[Int,Double,java.lang.String]
</span>
</code></pre>
</div>

<ul>
  <li>访问元组</li>
</ul>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code>
<span class="k">val</span> <span class="n">s</span> <span class="k">=</span> <span class="n">t</span><span class="o">.</span><span class="n">_1</span>

<span class="c1">//通过_1, _2, _3访问元组，从1开始，并不是0
</span>
</code></pre>
</div>

<ul>
  <li>
    <p>元组用于函数需要返回不止一个值的情况。</p>
  </li>
  <li>
    <p>拉链操作</p>
  </li>
</ul>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code>
<span class="k">val</span> <span class="n">symbols</span> <span class="k">=</span> <span class="nc">Array</span><span class="o">(</span><span class="s">"&lt;"</span><span class="o">,</span><span class="s">"-"</span><span class="o">,</span><span class="s">"&gt;"</span><span class="o">)</span>

<span class="k">val</span> <span class="n">counts</span> <span class="k">=</span> <span class="nc">Array</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="mi">10</span><span class="o">,</span><span class="mi">2</span><span class="o">)</span>

<span class="k">val</span> <span class="n">paris</span> <span class="k">=</span> <span class="n">symbols</span><span class="o">.</span><span class="n">zip</span><span class="o">(</span><span class="n">counts</span><span class="o">)</span>

<span class="c1">//输出对偶的数组 Array(("&lt;",2),("-",10),("&gt;",2))
</span>
<span class="k">for</span> <span class="o">((</span><span class="n">s</span><span class="o">,</span><span class="n">n</span><span class="o">)</span> <span class="k">&lt;-</span> <span class="n">paris</span><span class="o">)</span> <span class="n">print</span><span class="o">(</span><span class="n">s</span><span class="o">*</span><span class="n">n</span><span class="o">)</span>

<span class="c1">//对偶就可以一起被处理，会打印&lt;&lt;----------&gt;&gt;
</span>


<span class="n">可以用toMap方法将对偶的集合转换成映射</span>

<span class="n">symbols</span><span class="o">.</span><span class="n">zip</span><span class="o">(</span><span class="n">counts</span><span class="o">).</span><span class="n">toMap</span>

<span class="c1">//scala.collection.immutable.Map[String,Int] = Map(&lt; -&gt; 2, - -&gt; 10, &gt; -&gt; 2)
</span>
</code></pre>
</div>

<p>原创文章转载请注明出处：<a href="http://9leg.com/scala/2016/03/19/scala-for-the-impatient-05.html">快学scala笔记——映射和元组</a></p>

</article>
	
<p class="lotus-anno">Disclaimer: This article is based on  <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/" rel="nofollow" target="_blank" title="表示-非営利-継承">BY-NC-SA</a> license. Reproduced please specify switched from: <a href="" title="" rel="nofollow">whisper</a></p>
    
<section class="lotus-nextpage fn-clear">
    
    <div class="lotus-nextpage-left"><a class="prev" href="/scala/2016/03/13/scala-for-the-impatient-04.html" rel="prev">&laquo;&nbsp;快学scala笔记——数组相关操作</a></div>
    
    
</section>


<footer class="lotus-footer">
	<p>Copyright © 2011–2016 whisper All rights reserved. Design by <a href="http://www.zhanxin.info" target="_blank">zhanxin</a>.</p>
</footer>
<script src="https://inspireme.github.io/static/js/jquery.scrollTo.js" type="text/javascript"></script>
<script src="https://inspireme.github.io/static/js/iLotus.js" type="text/javascript"></script>
</body>
</html>
